<h1>All Books</h1>
<div class="links">
<%= link_to "Add Book", new_book_path %>
</div>

<div class="statistics">
  <h2>Statistics</h2>
  <h3>Top Rated Books: </h3>
    <ul>
    <% @top_rated_books.each do |book| %>
      <li><%= link_to(book.title, book_path(book)) %></li>
    <% end %>
    </ul>

  <h3>Bottom Rated Books: </h3>
    <ul>
    <% @bottom_rated_books.each do |book| %>
      <li><%= link_to(book.title, book_path(book)) %></li>
    <% end %>
    </ul>

  <h3>Top Users:</h3>
    <ul>
    <% @top_users.each do |user| %>
      <li><%= link_to(user.name, user_path(user))%></li>
    <% end %>
    </ul>
</div>
<div class="sort">

Sort by:<br>
<select id="sort_options" onchange="location = this.value;">
<option>-------</option>
<option id="avg_asc" value="/books?sort=avg_score&direction=DESC">Average Rating Ascending</option>
<option id="avg_desc" value="/books?sort=avg_score&direction=ASC">Average Rating Descending</option>
<option id="pages_asc" value="/books?sort=pages&direction=DESC">Number of Pages Ascending</option>
<option id="pages_desc" value="/books?sort=pages&direction=ASC">Number of Pages Descending</option>
<option id="tot_asc" value="/books?sort=total_reviews&direction=DESC">Total Number of Reviews Ascending</option>
<option id="tot_desc" value="/books?sort=total_reviews&direction=ASC">Total Number of Reviews Descending</option>

</select>
</div>

<% @books.each do |book| %>
<div class="books" id="book-<%book.id%>">
<h2><%= link_to(book.title, book_path(book)) %></h2>
<ul>
  <li><strong>Pages: </strong><%= book.pages %></li>
  <li><strong>Year: </strong><%= book.year %></li>

  <li><strong>Author(s): </strong><br>
  <% book.authors.each do |author| %><%= link_to(author.name, author_path(author)) %> <br> <% end %></li>

  <li> <strong>Total Reviews: </strong><%= book.reviews.count %></li>
  <li> <strong>Average Rating: </strong><%= book.average_review_rating %></li>

</ul>
</div>

<% end %>
